<!DOCTYPE html>
<html lang="sv">
<!--
    INSTRUKTIONER F√ñR ATT ANV√ÑNDA DIN EGEN V√ÑRLDSKARTBILD:

    1. Placera din v√§rldskartbild (t.ex. worldmap.jpg, worldmap.png) i samma mapp som denna HTML-fil
    2. P√• rad 122, √§ndra "Europa.jpg" till namnet p√• din bild (t.ex. "min_karta.png")
    3. √ñppna denna HTML-fil i din webbl√§sare
    4. Klicka p√• kartan f√∂r att s√§tta ut pins!

    Tips: Fungerar med .jpg, .png, .gif eller andra bildformat!

    DENNA FIL ANV√ÑNDER NU: Europa.jpg
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktiv Europakarta</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React och ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel f√∂r JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Lucide Icons as inline SVG components
        const MapPin = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                <circle cx="12" cy="10" r="3"></circle>
            </svg>
        );

        const X = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
            </svg>
        );

        function WorldMapWithPins() {
            const [pins, setPins] = useState([]);
            const [selectedPin, setSelectedPin] = useState(null);
            const [isEditing, setIsEditing] = useState(false);
            const [editForm, setEditForm] = useState({ title: '', description: '' });

            const handleMapClick = (e) => {
                const rect = e.currentTarget.getBoundingClientRect();
                const x = ((e.clientX - rect.left) / rect.width) * 100;
                const y = ((e.clientY - rect.top) / rect.height) * 100;

                const newPin = {
                    id: Date.now(),
                    x,
                    y,
                    title: '',
                    description: ''
                };

                setPins([...pins, newPin]);
                setSelectedPin(newPin);
                setIsEditing(true);
                setEditForm({ title: '', description: '' });
            };

            const handleSavePin = () => {
                if (selectedPin) {
                    setPins(pins.map(pin =>
                        pin.id === selectedPin.id
                            ? { ...pin, title: editForm.title, description: editForm.description }
                            : pin
                    ));
                    setIsEditing(false);
                    setSelectedPin(null);
                }
            };

            const handleDeletePin = (pinId) => {
                setPins(pins.filter(pin => pin.id !== pinId));
                if (selectedPin?.id === pinId) {
                    setSelectedPin(null);
                    setIsEditing(false);
                }
            };

            const handleEditPin = (pin) => {
                setSelectedPin(pin);
                setEditForm({ title: pin.title, description: pin.description });
                setIsEditing(true);
            };

            return (
                <div className="w-full h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                    <div className="max-w-7xl mx-auto h-full flex gap-4">
                        {/* Main Map Area */}
                        <div className="flex-1 bg-white rounded-lg shadow-xl p-6 flex flex-col">
                            <div className="mb-4">
                                <h1 className="text-3xl font-bold text-gray-800 mb-2">Interaktiv Europakarta</h1>
                                <p className="text-gray-600">Klicka p√• kartan f√∂r att s√§tta ut pins och l√§gga till information</p>
                            </div>

                            <div
                                className="flex-1 relative rounded-lg overflow-hidden border-4 border-gray-300 cursor-crosshair"
                                onClick={handleMapClick}
                                style={{ userSelect: 'none' }}
                            >
                                {/* Egen v√§rldskartbild - Nu anv√§nds Europa.jpg */}
                                <img
                                    src="Europa.jpg"
                                    alt="Europakarta"
                                    className="w-full h-full object-cover pointer-events-none"
                                    style={{ userSelect: 'none', display: 'block' }}
                                />

                                {/* Render pins */}
                                {pins.map(pin => (
                                    <div key={pin.id}>
                                        {/* Pin marker */}
                                        <div
                                            onClick={(e) => {
                                                e.stopPropagation();
                                                handleEditPin(pin);
                                            }}
                                            style={{
                                                position: 'absolute',
                                                left: `${pin.x}%`,
                                                top: `${pin.y}%`,
                                                transform: 'translate(-50%, -50%)',
                                                cursor: 'pointer',
                                                zIndex: 10
                                            }}
                                        >
                                            {/* Outer glow */}
                                            <div style={{
                                                width: '24px',
                                                height: '24px',
                                                borderRadius: '50%',
                                                backgroundColor: 'rgba(220, 38, 38, 0.3)',
                                                position: 'absolute',
                                                top: '50%',
                                                left: '50%',
                                                transform: 'translate(-50%, -50%)'
                                            }} />

                                            {/* Pin circle */}
                                            <div style={{
                                                width: '16px',
                                                height: '16px',
                                                borderRadius: '50%',
                                                backgroundColor: '#dc2626',
                                                border: '2px solid #7f1d1d',
                                                position: 'relative',
                                                transition: 'background-color 0.2s'
                                            }}
                                            className="hover:bg-red-700"
                                            />
                                        </div>

                                        {/* Pin label */}
                                        {pin.title && (
                                            <div
                                                style={{
                                                    position: 'absolute',
                                                    left: `${pin.x}%`,
                                                    top: `${pin.y}%`,
                                                    transform: 'translate(-50%, -200%)',
                                                    pointerEvents: 'none',
                                                    zIndex: 11
                                                }}
                                            >
                                                <div style={{
                                                    backgroundColor: 'white',
                                                    padding: '2px 6px',
                                                    borderRadius: '4px',
                                                    fontSize: '12px',
                                                    fontWeight: '600',
                                                    color: '#1f2937',
                                                    textShadow: 'none',
                                                    whiteSpace: 'nowrap',
                                                    boxShadow: '0 1px 3px rgba(0,0,0,0.3)'
                                                }}>
                                                    {pin.title.length > 20 ? pin.title.substring(0, 20) + '...' : pin.title}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Sidebar */}
                        <div className="w-96 bg-white rounded-lg shadow-xl p-6 flex flex-col">
                            <h2 className="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                                <MapPin className="text-red-600" />
                                Pins ({pins.length})
                            </h2>

                            {/* Edit Form */}
                            {isEditing && selectedPin && (
                                <div className="mb-6 p-4 bg-blue-50 rounded-lg border-2 border-blue-300">
                                    <h3 className="font-bold text-lg mb-3 text-gray-800">
                                        {selectedPin.title ? 'Redigera pin' : 'Ny pin'}
                                    </h3>
                                    <div className="space-y-3">
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-700 mb-1">
                                                Titel
                                            </label>
                                            <input
                                                type="text"
                                                value={editForm.title}
                                                onChange={(e) => setEditForm({ ...editForm, title: e.target.value })}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                placeholder="T.ex. Paris, Versailles..."
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-700 mb-1">
                                                Information
                                            </label>
                                            <textarea
                                                value={editForm.description}
                                                onChange={(e) => setEditForm({ ...editForm, description: e.target.value })}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent h-24 resize-none"
                                                placeholder="Beskriv h√§ndelsen, platsen eller l√§gg till historisk kontext..."
                                            />
                                        </div>
                                        <div className="flex gap-2">
                                            <button
                                                onClick={handleSavePin}
                                                className="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-semibold transition-colors"
                                            >
                                                Spara
                                            </button>
                                            <button
                                                onClick={() => {
                                                    setIsEditing(false);
                                                    setSelectedPin(null);
                                                }}
                                                className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold transition-colors"
                                            >
                                                Avbryt
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Pins List */}
                            <div className="flex-1 overflow-y-auto space-y-2">
                                {pins.length === 0 ? (
                                    <div className="text-center py-12 text-gray-400">
                                        <MapPin className="w-16 h-16 mx-auto mb-3 opacity-30" />
                                        <p className="text-lg">Inga pins √§nnu</p>
                                        <p className="text-sm mt-1">Klicka p√• kartan f√∂r att b√∂rja</p>
                                    </div>
                                ) : (
                                    pins.map(pin => (
                                        <div
                                            key={pin.id}
                                            className="p-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-400 transition-colors cursor-pointer"
                                            onClick={() => handleEditPin(pin)}
                                        >
                                            <div className="flex justify-between items-start">
                                                <div className="flex-1">
                                                    <h4 className="font-bold text-gray-800">
                                                        {pin.title || <span className="text-gray-400 italic">Ingen titel</span>}
                                                    </h4>
                                                    {pin.description && (
                                                        <p className="text-sm text-gray-600 mt-1 line-clamp-2">
                                                            {pin.description}
                                                        </p>
                                                    )}
                                                </div>
                                                <button
                                                    onClick={(e) => {
                                                        e.stopPropagation();
                                                        handleDeletePin(pin.id);
                                                    }}
                                                    className="ml-2 p-1 text-red-600 hover:bg-red-100 rounded transition-colors"
                                                >
                                                    <X className="w-5 h-5" />
                                                </button>
                                            </div>
                                        </div>
                                    ))
                                )}
                            </div>

                            {/* Info Box */}
                            <div className="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-gray-700">
                                <p className="font-semibold mb-1">üí° Tips:</p>
                                <ul className="space-y-1 text-xs">
                                    <li>‚Ä¢ Klicka p√• kartan f√∂r att s√§tta ut en pin</li>
                                    <li>‚Ä¢ Klicka p√• en pin f√∂r att redigera</li>
                                    <li>‚Ä¢ Pins sparas automatiskt i webbl√§saren</li>
                                    <li>‚Ä¢ F√∂r att byta bild: redigera rad 122 i HTML-filen</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<WorldMapWithPins />);
    </script>
</body>
</html>
